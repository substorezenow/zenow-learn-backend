# ===========================================
# ZENOW LEARN BACKEND - ENVIRONMENT CONFIG
# ===========================================

# ===========================================
# SERVER CONFIGURATION
# ===========================================
# Port for the server to listen on
# Cloud Run will override this with PORT environment variable
PORT=8080

# Node environment
NODE_ENV=production

# ===========================================
# DATABASE CONFIGURATION (CockroachDB)
# ===========================================
# Option 1: Connection String (Recommended for Cloud Run)
# Use this if you have a connection string from CockroachDB Cloud
COCKROACH_URL=postgresql://username:password@host:port/database?sslmode=require

# Option 2: Individual Connection Parameters
# Use these if you prefer individual parameters
COCKROACH_HOST=your-cockroach-host
COCKROACH_PORT=26257
COCKROACH_USER=your-username
COCKROACH_PASS=your-password
COCKROACH_DB=your-database-name
COCKROACH_SSL=true

# ===========================================
# AUTHENTICATION & SECURITY
# ===========================================
# JWT Secret - MUST be a strong, random string in production
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Session encryption key (32 bytes for AES-256)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_ENCRYPTION_KEY=your-32-byte-session-encryption-key

# CSRF secret key
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CSRF_SECRET=your-csrf-secret-key

# ===========================================
# CORS CONFIGURATION
# ===========================================
# Allowed origins for CORS (comma-separated for multiple origins)
# For production, specify your frontend domain(s)
CORS_ORIGIN=https://your-frontend-domain.com,https://your-admin-domain.com

# ===========================================
# RATE LIMITING CONFIGURATION
# ===========================================
# Rate limiting settings
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_LOGIN_MAX=5
RATE_LIMIT_LOGIN_WINDOW_MS=900000

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
# IP blocking settings
IP_BLOCK_DURATION_MS=3600000
MAX_FAILED_ATTEMPTS=5

# Session settings
SESSION_TIMEOUT_MS=14400000
SESSION_CLEANUP_INTERVAL_MS=3600000

# ===========================================
# FILE UPLOAD CONFIGURATION
# ===========================================
# Maximum file size for uploads (in bytes)
MAX_FILE_SIZE=10485760

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable security event logging
ENABLE_SECURITY_LOGGING=true

# ===========================================
# CLOUD RUN SPECIFIC CONFIGURATION
# ===========================================
# Cloud Run service name
SERVICE_NAME=zenow-learn-backend

# Cloud Run region
REGION=us-central1

# ===========================================
# MONITORING & HEALTH CHECKS
# ===========================================
# Health check endpoint
HEALTH_CHECK_PATH=/api/health

# Enable detailed health checks
ENABLE_DETAILED_HEALTH_CHECKS=true

# ===========================================
# EMAIL CONFIGURATION (Optional)
# ===========================================
# SMTP settings for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@zenowacademy.com

# ===========================================
# EXTERNAL SERVICES (Optional)
# ===========================================
# Redis URL for caching (if using Redis)
REDIS_URL=redis://your-redis-host:6379

# Cloud Storage bucket for file uploads
GCS_BUCKET_NAME=your-gcs-bucket-name

# ===========================================
# DEVELOPMENT/DEBUG CONFIGURATION
# ===========================================
# Enable debug mode (set to false in production)
DEBUG=false

# Enable SQL query logging
LOG_SQL_QUERIES=false

# ===========================================
# BACKUP CONFIGURATION
# ===========================================
# Enable automatic backups
ENABLE_BACKUPS=true

# Backup frequency (in hours)
BACKUP_FREQUENCY_HOURS=24

# ===========================================
# FEATURE FLAGS
# ===========================================
# Enable/disable features
ENABLE_COURSE_BUNDLES=true
ENABLE_COURSE_REVIEWS=true
ENABLE_PROGRESS_TRACKING=true
ENABLE_NOTIFICATIONS=false
